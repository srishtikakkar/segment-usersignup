<!DOCTYPE html>
<html>

<head>
   <title>Registration and Sign-up Form</title>
   <script>

            class utm_enricher_plugin {
  constructor() {
    this.name = 'UTM Enricher'; // Use regular single quotes instead of fancy quotes
    // before, enrichment, destination, after
    this.type = 'before';
    this.version = '1';
  }
  isLoaded() {
    return true;
  }
  async load(ctx, analytics) {
    // parse URL for utm params
    const queryString = window.location.search;
    if (queryString !== '') {
      console.log("setting UTM params");
      const urlParams = new URLSearchParams(queryString);
      const medium = urlParams.get('utm_medium');
      const source = urlParams.get('utm_source');
      const content = urlParams.get('utm_content');
      const tactic = urlParams.get('utm_tactic');
      const link = urlParams.get('utm_link');
      var utm_params = JSON.stringify({medium: medium, source: source, content: content, tactic: tactic, link: link });
      localStorage.setItem("utm_params", utm_params);
    }
    return;
  }
  async track(ctx) {
    ctx.event.properties.utm_params = JSON.parse(localStorage.getItem("utm_params"));
    return ctx;
  }
  async page(ctx) {
    ctx.event.properties.utm_params = JSON.parse(localStorage.getItem("utm_params"));
    return ctx;
  }
}

   </script>
      
   <script>
      !function () {
         var analytics = window.analytics = window.analytics || []; if (!analytics.initialize) if (analytics.invoked) window.console && console.error && console.error("Segment snippet included twice."); else {
            analytics.invoked = !0; analytics.methods = ["trackSubmit", "trackClick", "trackLink", "trackForm", "pageview", "identify", "reset", "group", "track", "ready", "alias", "debug", "page", "once", "off", "on", "addSourceMiddleware", "addIntegrationMiddleware", "setAnonymousId", "addDestinationMiddleware"]; analytics.factory = function (e) { return function () { var t = Array.prototype.slice.call(arguments); t.unshift(e); analytics.push(t); return analytics } }; for (var e = 0; e < analytics.methods.length; e++) { var key = analytics.methods[e]; analytics[key] = analytics.factory(key) } analytics.load = function (key, e) { var t = document.createElement("script"); t.type = "text/javascript"; t.async = !0; t.src = "https://cdn.segment.com/analytics.js/v1/" + key + "/analytics.min.js"; var n = document.getElementsByTagName("script")[0]; n.parentNode.insertBefore(t, n); analytics._loadOptions = e }; analytics._writeKey = "wvwAdj28GcUK0TPhfPu2eJgCv1Y7vVAC";; analytics.SNIPPET_VERSION = "4.15.3";
            analytics.load("wvwAdj28GcUK0TPhfPu2eJgCv1Y7vVAC");
            analytics.page();
         }


         const utmEnricher = new utm_enricher_plugin();
         utmEnricher.load();
         
      }();
   
   </script>
   <!-- Hotjar Tracking Code for labfinder test -->
<script>
    (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:3608654,hjsv:6};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
</script>
   <link rel="stylesheet" href="style.css">
</head>

<body>
   <form id="signup-form">
      <label for="name">Name:</label>
      <input type="text" id="name" name="name"><br><br>
      <label for="email">Email:</label>
      <input type="email" id="email" name="email"><br><br>
      <label for="password">Password:</label>
      <input type="password" id="password" name="password"><br><br>
      <button type="submit">Sign up</button>
   </form>

   <button onclick="location.href='login.html'">Already have an account? Log in</button>

   <script>
      // Select the form element
      const form = document.querySelector('#signup-form');

      // Handle the form submission
      form.addEventListener('submit', function (event) {
         event.preventDefault(); // Prevent the default form submission behavior

         // Get the input values
         const name = document.querySelector('#name').value;
         const email = document.querySelector('#email').value;
         const password = document.querySelector('#password').value;
         // Generate a random user ID
         const userId = Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);

         // Store the user ID in local storage
         localStorage.setItem('userId', userId);
         localStorage.setItem('email', email);
         localStorage.setItem('password', password);

         console.log(name, email, password);
         // Validate the input values
         if (name === '' || email === '' || password === '') {
            alert('Please fill in all the fields');
            return false;
         }

         analytics.identify(userId, {
            name: name,
            email: email
         });


         analytics.track('Sign Up Completed', {
         });

         // Redirect the user to the login page
         window.location.href = 'login.html';
      });
   </script>
</body>

</html>
